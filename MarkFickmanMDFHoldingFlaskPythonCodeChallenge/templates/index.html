{% extends 'base.html' %}

{% block head %}
<title>M Fickman MFD</title>
<h1>MFD Holding Mark Fickman Code Challenge</h1>
{%endblock %}

{% block body %}
<h6>MDFF Holding Code Challenge.
    Create flask crud app to display mock call log data.

    Log data will contain two valid phone numbers (ani and callto).
    Numbers must be valid phone numbers.

    Without access to valid phone number database to cross check, utilize two logic rules.
    Numbers must begin with 1 and must be 11 integers long.

    Write data to external sqlite database, including the time the call was logged.

    Add field for action to take, either answer or hangup.
    Answer will perform mock PUT method, and will activate or place the call on system. Utilize boolean logic to determine if call is on system.
    Hangup will perform mock DELETE method, and will remove call from system.  Utilize boolean logic to keep call in call log, but do not display as active call.

    Utilize datetime module to log the time a call log was created.

    Add link to show full all content in database as history page.
</h6>
<div class="content_XX">
     <br>
    <div id="time-elapsed"></div>
    <br>
    <form action="/" method="POST">
        <label for="ani_number">ani number</label><br>
        <input type="text" name="ani_number" id="ani_number"><br><br>
        <label for="callto_number">callto number</label><br>
        <input type="text" name="callto_number" id="callto_number"><br><br>
        <input type="submit" value="Create New Log">

    </form>

    <h2>ALL PENDING CALLS</h2>
    <table border="1" class="table table-bordered table-hover table-striped table-responsive">
        <tr>
            <th class="text-center" style="padding: 10px; background: whitesmoke">ID</th>
            <th class="text-center" style="padding: 10px; background: whitesmoke">WHO IS CALLING</th>
            <th class="text-center" style="padding: 10px; background: whitesmoke">WHERE ARE THEY CALLING TO</th>
            <th class="text-center" style="padding: 10px; background: whitesmoke">DATE AND TIME CALL WAS INITIATED</th>
            <th class="text-center" style="padding: 10px; background: whitesmoke">ACTIONS</th>
        </tr>
        {% for pending_call in pending_log %}
            <tr>
                <td class="text-center" syle="padding: 10px;">{{pending_call.id}}</td>
                <td class="text-center" syle="padding: 10px;">{{pending_call.ani_number}}</td>
                <td class="text-center" syle="padding: 10px;">{{pending_call.callto_number}}</td>
                <td class="text-center" syle="padding: 10px;">{{pending_call.date_created}}</td>
                <td class="text-center" syle="padding: 10px;">
                    <a href="/answer/{{pending_call.id}}">Answer</a>
                    <br><br>
                    <a href="/hangup/{{pending_call.id}}">Hang Up</a>
                </td>
            </tr>
        {% endfor %}
    </table>
    <br>

    <h2>ALL ACTIVE CALLS</h2>
    <table border="1">
        <tr>
            <th class="text-center" style="padding: 10px; background: whitesmoke">ID</th>
            <th class="text-center" style="padding: 10px; background: whitesmoke">WHO IS CALLING</th>
            <th class="text-center" style="padding: 10px; background: whitesmoke">WHERE ARE THEY CALLING TO</th>
            <th class="text-center" style="padding: 10px; background: whitesmoke">TO DO !! Time Active !! TO DO</th>
            <th class="text-center" style="padding: 10px; background: whitesmoke">ACTIONS</th>
        </tr>

        {% for active_call in active_log %}
            <tr>
                <td>{{active_call.id}}</td>
                <td>{{active_call.ani_number}}</td>
                <td>{{active_call.callto_number}}</td>
                <td><div id="time-elapsed"></div></td>
                <td>
                    <a href="/hangup/{{active_call.id}}">Hang Up</a>
                </td>
            </tr>
        {% endfor %}

    </table>
    <br>
    <br>
    <a href="/history_page/">History Page Showing All Calls</a>

</div>

{%endblock %}